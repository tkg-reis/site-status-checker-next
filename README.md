# Site Status Checker Next.js

Next.js 14を使用したサイトステータスチェッカーアプリケーションです。

## Dockerでの起動方法

### 開発環境での起動
今後更新予定

### 本番環境での起動
今後更新予定

## アクセス方法

アプリケーションが起動したら、ブラウザで以下のURLにアクセスしてください：

- http://localhost:3000

## 環境変数
今後更新予定

# memo

## 最低限これしかやらないリスト　2025/12/31更新
- ~~signup login logout middlewareの実装を試す、わからない部分はAIへ~~
- ~~ログインログアウトミドルウェアの実装後にログイン後のヘッダー項目の制御~~
~~コミット一回入れる~~
- ~~各ページに認証しているか確認するヘルパー関数をlayoutに置いた関係上コンポーネントツリーの最上部はserver componentにしないといけない？ため作成し直す~~
=> クライアントコンポーネントのTOPでasync関数はエラーになるので削除した。ただ設計としてはクライアントコンポーネントにしなくもよい部分もそれにしているため変更はすべきである
- ~~userページで実装~~
  - ~~ログインしているユーザー情報の記載~~
    - ~~ログインユーザー情報~~
    - ~~登録しているurlの情報~~
  - ~~登録したurlを更新削除できる機能が正常か確認~~
  - ~~insert処理ができるか確認する~~
~~コミットを一回入れる~~
- ~~現行のプロジェクトのパスワードを失念している状態のため、プロジェクトごと作り直す、今のプロジェクトがファイルとして保存できればなおよい~~
- 脆弱性の確認
  - node.jsのパッチをいれる。
- DB設計を最小限単位で見直してみる。必要ならスキーマを再定義しておく。
- supabase cliができるか確認する
- DBのスキーマにかかる型の自動出力をしておく
- RLSの理解、適切な設定
- 登録したURLデータの参照更新削除及びユーザー情報参照が正しい取得方法、設計で行われているか確認する
- ログインしたユーザー情報に基づいたデータが来るように実装を追加する。（テーブルにuser情報の追加とユーザーが削除された時のフォーリンキーの設定）
- 新しく作成したプロジェクトの疎通確認
- gitのコミットはなるべく分散させる。ジョブ関連の実装は切り戻し処理しておく
- 今回目指すのはログイン機能?、CRUD操作、BASIC認証?のみとしクーロン実装はしない（ログイン実装に時間がかかるようならそれはおいておいてテストをやる。※要件の優先順位としてログイン機能が低いため（ログインが可能で余裕があればplaywrightでテストしてみる、できなければ軽微でもいいのでテストをしておく）
- そのほかはメモをチェックする
ここまで勉強会の前日までやっておく。早めに来たらほかの実装を着手する。途中の場合は切り戻ししておく。
- デプロイ準備
  - 会社サーバーなら相談する
  - Docker環境でのリリース可能なサービスを探しておく　マルチステージビルドの作成？が必要か確認

## デプロイ後に対応項目
- 認証されていないとinsert topには入れないがGETの返り値を200でないようにする。
- 

## 上記によって要件を満たしている部分確認 ※microsoft teams plannerから引用　2025/12/31更新

- [ ] URL登録：サイト上からでなく、まずはconfigへの設定でも可
- [ ] 死活監視：レスポンスに200が返ってくるかどうか、レベルから
- [ ] 死活表示：監視ツール起動時・監視サイト更新時、各URLの死活状態を一括表示
- [ ] DB管理：URLの登録、結果をDBに保存する
- [ ] URL登録：サイト上で登録、変更できるように

## 余裕あれば枠　2025/12/31更新
- [ ] ログインユーザによって登録URLをCRUD、そのユーザに沿ったURLを監視ツール起動時・監視サイト更新時に表示するように

※~~sample text~~で取り消し線

-----------
- rlsの設計設定。
- prismaの導入
- ~~shadcnの導入~~
- ~~apikey内包した上でDB通信を可能とする。~~
- ~~console(backendside)の確認~~
- DBの型とtypescriptの型の違いについて
  - 自動出力する機能があったはず
- 実行環境について、会社のサーバーにアクセスしてdockerでnode,postgreなどの実行環境を構築する。
  - かなり後周し
- ui
  - ステータスコードの隣に緑か赤表示
  - card => data tableに変更したほうがいいかな
- ログイン後の画面しか入れない画面の制限するmiddlewareの設定
- 
# record
- DBaccessが伴う場合のhttp通信はNextApiResponse/Request,urlstatusを確認するときのhttp通信はNextResponse/Request

# 今後
- 初期画面は登録したurl情報を閲覧、検索するのみの機能を付与する。
- 対してurl画面はurlの登録、更新、削除とuser設定の更新、削除を担うものにする。
- ジョブの処理は実行時間を考慮したものをsql editorに記載して処理を分岐するようにする。
- 下記画面出し分けをリクエストするurlの情報を補うmiddleware作成で実施する
  - それぞれupdate,deleteのformコンポーネントも作成する。
  - home page
    - deleteは
      - created_at
      - url
      - company_nameを表示
  - user page
    - updateは
      - execution_time
      - url
      - company_nameを表示
    - deleteは
      - execution_time
      - url
      - company_nameを表示

